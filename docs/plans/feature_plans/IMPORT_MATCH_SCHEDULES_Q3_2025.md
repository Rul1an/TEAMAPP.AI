# Import Match Schedules – Implementation Plan (Q3 2025)

_Issue: #31 – Phase 1 Master Roadmap_
_Last updated: 2025-07-18_

## 1. Objective
Allow coaches to bulk-import upcoming match fixtures from an Excel/CSV file generated by league systems.

## 2. File Format
| Column | Example | Required |
|--------|---------|----------|
| date   | 2025-09-12 | ✅ |
| time   | 19:30 | ✅ |
| opponent | FC Utrecht U17 | ✅ |
| competition | Eredivisie U17 | ✅ |
| location | Thuis / Uit | ↺ default=Thuis |

Supported:
* CSV (comma-separated, UTF-8) – `.csv`
* Excel Open XML – `.xlsx`

## 3. Architecture
* `ScheduleImportService.importFile(File f)` → returns `Result<List<Match>>`.
* Uses existing `MatchRepository.addAll()` for persistence.
* Runs parsing in a background isolate (`compute`) to avoid jank.
* Validation errors collected and surfaced as `ImportReport`.

## 4. Work Breakdown
| ID | Task | Est. h | Owner |
|----|------|--------|-------|
| S1 | Define `ImportReport` model | 0.5 | FE |
| S2 | Implement CSV parser (using `csv` pkg) | 2 | FE |
| S3 | Implement XLSX parser (using `excel` pkg) | 2 | FE |
| S4 | Background isolate wrapper & progress callback | 1.5 | FE |
| S5 | `ScheduleImportService` with `importFile` | 1.5 | FE |
| S6 | Integrate into `MatchesScreen` via FAB > FilePicker | 1 | FE |
| S7 | Unit tests: parsing & validation | 2 | QA |
| S8 | Widget test: Import dialog flow | 1.5 | QA |
| S9 | Docs (`guides/import/`) + sample file | 0.5 | Docs |
| **Total** | **12.5 h** | |

## 5. Acceptance Criteria
* Valid file imports fixtures → matches visible in schedule.
* Validation errors listed in dialog; no partial writes on fatal errors.
* Import completes < 3 s for 100 rows on mobile.
* Analyzer 0 issues; tests green.

## 6. Risks & Mitigations
| Risk | Impact | Mitigation |
|------|--------|------------|
| Time-zone mismatch | Medium | Parse date+time using locale; allow manual TZ offset |
| Excel large dependency size | Low | Use selective import `excel: ^4 minimal` |

---
_Next: add `import_match_schedule_service.dart` skeleton + unit-test stub._